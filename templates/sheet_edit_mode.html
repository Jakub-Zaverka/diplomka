<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>User Info - Edit</title>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous"> -->
    <link rel="stylesheet" href="{{ url_for('static',filename='custom.css') }}">
    <link rel="stylesheet" href="{{ url_for('static',filename='styles.css') }}">
    <script src="{{ url_for('static', filename='scripts.js') }}"></script>

</head>

<body class="bg-white">
    <!-- <h1>PH:Char_id:{{ character.char_id }} Char name:{{ character.name }} User_id:{{ character.user_id }}</h1> -->

    <div class="row">
        <div class="col-12 col-md-6 row">
            <!-- Atributes -->
            <div class="col-12 col-md-7 px-md-3">
                <div class="order-md-1">
                    <div class="row">
                        <div class="bg-light row shadow mx-0 py-1">
                            <div class="col-2 ">
                                <div class="row">
                                    <!-- <p class="h3 my-0">+5</p> -->
                                </div>
                                <div class="row ">
                                    <h3>Value</h3>
                                </div>
                            </div>
                            <div class="col-10 align-self-center">
                                <p class="h3 w-100 word-wrap: break-word px-4">Atribute Name</p>
                            </div>
                        </div>
                    </div>
                    <!-- Individual Atribute -->
                    {% for item in data_page_template["atributes"] %}
                    <div class="row">
                        <div class="bg-light row shadow mx-0 py-1">
                            <!-- Levý sloupec s hodnotou -->
                            <div class="col-2 d-flex align-items-center justify-content-center">
                                <input class="form-control border-0 bg-primary text-center ms-2 auto_update_stats"
                                    style="width: 70px; height: 70px; font-size: 2rem; box-shadow: none;"
                                    id='{{ item["name"].lower() }}' value='{{ character[item["name"]] }}'>
                            </div>

                            <!-- Pravý sloupec s názvem + proficiency -->
                            <div class="col-10 align-self-center">
                                <p class="h3 w-100 text-wrap px-4">{{ item["name"] }}</p>
                                {% set skill_key = item["name"] | lower | replace(' ', '_') %}
                                {% set level = proficiencies.get(skill_key, 1) %}
                                <div class="row px-2">
                                    <div class="col-12 d-flex gap-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" id="skillNone_{{ skill_key }}"
                                                name="skill_{{ skill_key }}" value="1" {% if level==1 %}checked{% endif
                                                %} onchange="updateSkill('{{ item['name'].lower() }}', this.value)">
                                            <label class="form-check-label" for="skillNone_{{ skill_key }}">None</label>
                                        </div>

                                        <div class="form-check">
                                            <input class="form-check-input" type="radio"
                                                id="skillProficient_{{ skill_key }}" name="skill_{{ skill_key }}"
                                                value="2" {% if level==2 %}checked{% endif %}
                                                onchange="updateSkill('{{ item['name'].lower() }}', this.value)">
                                            <label class="form-check-label"
                                                for="skillProficient_{{ skill_key }}">Proficient</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}



                </div>
            </div>
            <!-- TODO: Proficiency with skills -->
            <!-- Skills -->
            <div class="col-12 col-md-5 order-md-2 px-md-3">
                <!-- celý blok -->
                <div class="bg-light row shadow px-0">
                    <!-- Header -->
                    <div class="col-12">
                        <h5 class="my-2 px-3">Proficiency</h5>
                    </div>

                    <!-- Scrollable skills container -->
                    <div class="col-12 skills-container overflow-auto" style="max-height: 80vh;">
                        {% for item in data_page_template["skills"] %}
                        {% set skill_key = item["name"] | lower | replace(' ', '_') %}
                        {% set level = proficiencies.get(skill_key, 1) %}
                        <div class="bg-light row shadow-sm px-3 py-2 mb-2 rounded-0">
                            <!-- Skill name -->
                            <div class="col-12">
                                <p class="h5 w-100 text-wrap mb-2">{{ item["name"] }}</p>
                            </div>

                            <!-- Radios -->
                            <div class="col-12 d-flex gap-3 flex-wrap">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" id="skillNone_{{ skill_key }}"
                                        name="skill_{{ skill_key }}" value="1" {% if level==1 %}checked{% endif %}
                                        onchange="updateSkill('{{ skill_key }}', this.value)">
                                    <label class="form-check-label" for="skillNone_{{ skill_key }}">None</label>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input" type="radio" id="skillProficient_{{ skill_key }}"
                                        name="skill_{{ skill_key }}" value="2" {% if level==2 %}checked{% endif %}
                                        onchange="updateSkill('{{ skill_key }}', this.value)">
                                    <label class="form-check-label"
                                        for="skillProficient_{{ skill_key }}">Proficient</label>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input" type="radio" id="skillExpertise_{{ skill_key }}"
                                        name="skill_{{ skill_key }}" value="3" {% if level==3 %}checked{% endif %}
                                        onchange="updateSkill('{{ skill_key }}', this.value)">
                                    <label class="form-check-label"
                                        for="skillExpertise_{{ skill_key }}">Expertise</label>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>



        </div>
        <!-- Health -->
        <div class="no-gutters-edit col-12 col-md-6 px-4 p">
            <div class="row bg-light shadow">
                <div class="col-12">
                    <div class="row m-1">
                        <form class="col-10">
                            <div class="row g-3">
                                <div class="col">
                                    <label for="level" class="form-label">Level</label>
                                    <input id="level" type="text" class="form-control auto_update_stats bg-primary"
                                        value="{{ character.level }}">
                                </div>
                                <div class="col">
                                    <label for="char_race" class="form-label">Race</label>
                                    <input id="char_race" type="text" class="form-control auto_update_stats bg-primary"
                                        value="{{ character.char_race }}">
                                </div>
                                <div class="col">
                                    <label for="ac" class="form-label">AC</label>
                                    <input id="ac" type="text" class="form-control auto_update_stats bg-primary"
                                        value="{{ character.ac }}">
                                </div>
                                <div class="col">
                                    <label for="max_hp" class="form-label">Max HP</label>
                                    <input id="max_hp" type="text" class="form-control auto_update_stats bg-primary"
                                        value="{{ character.max_hp }}">
                                </div>
                            </div>

                            <div class="row g-3 mt-1">
                                <div class="col">
                                    <label for="char_class" class="form-label">Class</label>
                                    <!-- <input id="char_class" type="text" class="form-control auto_update_stats"
                                        value="{{ character.char_class }}"> -->
                                    <select id="char_class" class="form-select auto_update_stats bg-primary"
                                        aria-label="Class select">
                                        <option selected>Select Class</option>
                                        {% for item in player_classes %}
                                        {% if item == character.char_class %}
                                        <option selected value="{{ item }}">{{ item | capitalize}}</option>
                                        {%else%}
                                        <option value="{{ item }}">{{ item | capitalize}}</option>
                                        {%endif%}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col">
                                    <label for="char_subclass" class="form-label">Subclass</label>
                                    <input id="char_subclass" type="text" class="form-control auto_update_stats bg-primary"
                                        value="{{ character.char_subclass }}">
                                </div>
                                <div class="col">
                                    <label for="speed" class="form-label">TODO:Move Speed</label>
                                    <input id="speed" type="text" class="form-control bg-primary" placeholder="Speed">
                                </div>
                            </div>
                        </form>

                        <div class="col-2 align-content-center">
                            <button class="edit-button btn btn-warning p-1"
                                data-url="{{ url_for('sheet', char_id=character['char_id']) }}">Exit Edit Mode</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
</body>

</html>